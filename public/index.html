<!DOCTYPE html>
<html>
<head>
<style>
	body {
		margin: 5% 15% 0 15% !important;
	}

	.btn {
		text-align: center !important;
		margin-top:20px;
	}

	#take-pic {
		position:absolute; 
		margin-top: 30%; 
		margin-left:20px;
	}

	#phq-survey, #skin-quiz, #skin-picture, #obesity-quiz, #symptoms {
		display: none;
	}

	input[type=radio], input[type=checkbox] {
		display:none;
	}

	input[type=radio] + label, input[type=checkbox] + label {
		display:inline-block;
		margin:-2px;
		padding: 4px 12px;
		margin-bottom: 0;
		font-size: 14px;
		line-height: 20px;
		color: #3090C7;
		text-align: center;
		text-shadow: 0 1px 1px rgba(255,255,255,0.75);
		vertical-align: middle;
		cursor: pointer;
		background-color: #F8F8F8;
		/*background-image: -moz-linear-gradient(top,#fff,#e6e6e6);
		background-image: -webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));
		background-image: -webkit-linear-gradient(top,#fff,#e6e6e6);
		background-image: -o-linear-gradient(top,#fff,#e6e6e6);
		background-image: linear-gradient(to bottom,#fff,#e6e6e6);
		background-repeat: repeat-x;*/
		border: 0px solid #ccc;
		border-color: #e6e6e6 #e6e6e6 #bfbfbf;
		border-color: rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);
		border-bottom-color: #b3b3b3;
		/*filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);
		filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);*/
		/*-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
		-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
		box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);*/
	}

	 input[type=radio]:checked + label, input[type=checkbox]:checked + label{
		   background-image: none;
		outline: 0;
/*		-webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);
		-moz-box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);
		box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);*/
			background-color:#3090C7;
			color:#F8F8F8;
	}

	.numberCircle {
	    border-radius: 50%;
	    width: 20px;
	    height: 20px;
	    padding: 8px;
	    
	    background: #fff;
	    border: 2px solid #B8B8B8;
	    color: #B8B8B8;
	    text-align: center;
	    
	    font: 20px Arial, sans-serif;
	}

</style>

<link rel='stylesheet' type='text/css' href='foundation/css/foundation.css'>
<script src='http://code.jquery.com/jquery.min.js' type='text/javascript'></script>
<script src='../socket.io/socket.io.js'></script>

</head>

<script src='../socket.io/socket.io.js'></script>
</head>
<body>

<div id='name-input'>
	First name: <br><br><input type='text' name='fname'><br><br>
	Last name: <br><br><input type='text' name='lname'><br>
	<div class='btn'><button id='sign-in'>Submit</button></div>
</div>

<div id='symptoms'>
	Do you have any symptoms since you last updated your profile? <br><br>
	<textarea id='symptoms-text' rows='4' cols='50' style='resize:none'></textarea><br>
	<div class='btn'>
		<button id='symptom-submit'>Submit</button>
		<button id='skip-symptom'>Skip</button>
	</div>
</div>

<div id='phq-survey'>
	<p style="font-family:verdana;color:#3090C7;font-size:24px;">Over the last two weeks, how often have you been bothered by any of the following problems?<br>

	<p style="font-family:verdana;color:#3090C7;font-size:20px;">

	<div class="numberCircle">1</div>
	Little interest or pleasure in doing things
	    <input type="radio" id="radio1" name="radios1" value="0">
	       <label for="radio1">Not at all</label>
	    <input type="radio" id="radio2" name="radios1"value="1">
	       <label for="radio2">Several days</label>
	    <input type="radio" id="radio3" name="radios1" value="2">
	       <label for="radio3">More than half the days</label> 
        <input type="radio" id="radio4" name="radios1" value="3">
       	   <label for="radio4">Nearly every day</label>  
	<br><br>

	<div class="numberCircle">2</div>
	Feeling down, depressed, or hopeless
	    <input type="radio" id="radio5" name="radios2" value="0">
	       <label for="radio5">Not at all</label>
	    <input type="radio" id="radio6" name="radios2"value="1">
	       <label for="radio6">Several days</label>
	    <input type="radio" id="radio7" name="radios2" value="2">
	       <label for="radio7">More than half the days</label> 
        <input type="radio" id="radio8" name="radios2" value="3">
       	   <label for="radio8">Nearly every day</label>  
	<br><br>

	<div class='btn'>
		<button id='phq-submit'>Submit</button>
		<button id='skip-phq'>Skip</button>
	</div>

</div>

<div id='skin-quiz'>
	<div class='question'>
		Your eye color is: <br><br>
		<input type='radio'>Light blue, light gray, or light green
		<input type='radio'> Blue, gray, or green
		<input type='radio'>Hazel or light brown
		<input type='radio'>Dark brown
		<input type='radio'>Brownish black
	</div>

	<div class='question'>
		Your natural hair color is: <br><br>
		<input type='radio'>Red or light blonde 
		<input type='radio'>Blonde 
		<input type='radio'>Dark blonde or light brown 
		<input type='radio'>Dark brown 
		<input type='radio'>Black 
	</div>

	<div class='question'>
		<br>Your natural skin color (before sun exposure) is: <br><br>
		<input type='radio'>Ivory white 
		<input type='radio'>Fair or pale 
		<input type='radio'>Fair to beige, with golden undertone 
		<input type='radio'>Olive or light brown 
		<input type='radio'>Dark brown or black 
	</div>

	<div class='question'>
		<br>How many freckles do you have on unexposed areas of your skin?<br><br>
		<input type='radio'>Many 
		<input type='radio'>Several 
		<input type='radio'>A few 
		<input type='radio'>Very few 
		<input type='radio'>None
	</div> 

	<div class='question'>
		<br>How does your skin respond to the sun?<br><br>
		<input type='radio'>Always burns, blisters and peels 
		<input type='radio'>Often burns, blisters and peels 
		<input type='radio'>Burns moderately 
		<input type='radio'>Burns rarely, if at all 
		<input type='radio'>Never burns 
	</div>

	<div class='question'>
		<br>Does your skin tan?<br><br>
		<input type='radio'>Never -- I always burn
		<input type='radio'>Seldom 
		<input type='radio'>Sometimes 
		<input type='radio'>Often 
		<input type='radio'>Always 
	</div>

	<div class='question'>
		<br>How deeply do you tan?<br><br>
		<input type='radio'>Not at all or very little 
		<input type='radio'>Lightly 
		<input type='radio'>Moderately 
		<input type='radio'>Deeply 
		<input type='radio'>My skin is naturally dark 
	</div>

	<div class='question'>
		<br>How sensitive is your face to the sun?<br><br>
		<input type='radio'>Very sensitive 
		<input type='radio'>Sensitive 
		<input type='radio'>Normal 
		<input type='radio'>Resistant 
		<input type='radio'>Very resistant/Never had a problem
	</div>

	<div class='btn'>
		<button id='skin-submit'>Submit</button> 
		<button id='skip-skin-quiz'>Skip</button>
	</div>
</div>

<div id='skin-picture'>
	Take a picture! <br><br>
	<video id="video" width="640" height="480" autoplay></video>
	<button id="take-pic">Take Photo</button>
	<br>
	<canvas id="canvas" width="640" height="480"></canvas>

	<div class='btn'>
		<button id='skin-pic-submit'>Submit</button> 
		<button id='skip-skin-pic'>Skip</button>
	</div>
</div>

<div id='obesity-quiz'>
    <div class='question'>
		Do you exercise less than twice a week? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
        <div class='question'>
		What's your height? <br>
		<input type='text' name="height">
	</div>
    
    <div class='question'>
		What's your weight? <br>
		<input type='text' name="weight">
	</div>
    
    <div class='question'>
		Do you have a waist measurement of 40 inches or more if male, or 35 inches or more if female? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    <hr>
    
    <div class='question'>
		Do you have a "spare tire" or apple-shaped body? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    
    <div class='question'>
		Do you have a family history of heart disease, diabetes, obesity or hypertension? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    <div class='question'>
		Do you crave sweets and carbohydrates? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    <div class='question'>
		Do you have difficulty losing weight? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    <div class='question'>
		Do you struggle daily with fatigue? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
    <div class='question'>
		Do you have back or knee problems because of your weight? <br>
		<input type='radio'>Yes
		<input type='radio'>No 
	</div>
    
    <div class='question'>
		Do you experience erectile dysfunction (ED) or female dysfunction? <br>
		<input type='radio'>Yes
		<input type='radio'>No
	</div>
    
</div>

<script>
var healthScore = 10;

$('#sign-in').on('click', function() {
	$('#name-input').hide();
	$('html,body').animate({scrollTop: $(this).offset().top}, 200);
	$('#symptoms').show();
});

$('#symptom-submit, #skip-symptom').on('click', function() {
	$('#symptoms').hide();
	$('html,body').animate({scrollTop: $(this).offset().top}, 200);
	$('#phq-survey').show();
});

$('#phq-submit, #skip-phq').on('click', function() {
	$('#phq-survey').hide();
	$('html,body').animate({scrollTop: $(this).offset().top}, 200);
	$('#skin-quiz').show();
});

var canvas;

$('#skin-submit, #skip-skin-quiz').on('click', function() {
	$('#skin-quiz').hide();
	$('html,body').animate({scrollTop: $(this).offset().top}, 800);
	$('#skin-picture').show();
	// window.addEventListener("DOMContentLoaded", function() {
		canvas = document.getElementById("canvas"),
			context = canvas.getContext("2d"),
			video = document.getElementById("video"),
			videoObj = { "video": true },
			errBack = function(error) {
				console.log("Video capture error: ", error.code); 
			};

		if(navigator.getUserMedia) { 
			navigator.getUserMedia(videoObj, function(stream) {
				video.src = stream;
				video.play();
			}, errBack);
		} else if(navigator.webkitGetUserMedia) { 
			navigator.webkitGetUserMedia(videoObj, function(stream){
				video.src = window.webkitURL.createObjectURL(stream);
				video.play();
			}, errBack);
		}
		else if(navigator.mozGetUserMedia) {
			navigator.mozGetUserMedia(videoObj, function(stream){
				video.src = window.URL.createObjectURL(stream);
				video.play();
			}, errBack);
		}

		$('#take-pic').on('click', function() {
			context.drawImage(video, 0, 0, 640, 480);
		});
	// }, false);
});

$('#skin-pic-submit, #skip-skin-pic').on('click', function() {
	console.log(canvas.toDataURL());
	$('#skin-picture').hide();
	$('html,body').animate({scrollTop: $(this).offset().top}, 200);
	$('#obesity-quiz').show();
});

if (io) {
  var socket = io.connect('/');
  socket.on('connected', function (res) {
  	var email = { "toEmail": "alexacgreenberg@gmail.com" ,"healthScore" : healthScore};
    socket.emit('send email', email);
  });
}
</script>
</body>
</html>